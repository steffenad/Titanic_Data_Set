# Exploring Titanic Data Set


### Loading Libraries

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
%matplotlib inline


### Loading Data Set (Titanic Data Set from Kaggle: https://www.kaggle.com/c/titanic)

train = pd.read_excel('Titanic_Train.xlsx')
test = pd.read_excel('Titanic_Test.xlsx')


### Data Preparation

# convert data type to 'category' for PassengerId, Pclass, Ticket, Name and Embarked
train[['Survived','PassengerId','Pclass','Ticket','Name','Embarked']] = train[['Survived','PassengerId','Pclass','Ticket','Name','Embarked']].astype('category')


# delete irrelevant features: PassengerId and Ticket redundant, Cabin too many missing values
train.drop(['PassengerId','Cabin','Ticket'],axis=1, inplace=True)


# Missing values


# Any missing values?
train.isnull().values.any()

# Total missing values for each feature
train.isnull().sum()

#plotting missing values
sns.heatmap(train.isnull(),yticklabels=False,cbar=False)

#observations with missing values for variable "Fare"
train[train['Fare'].isnull()]

# deleting one observation with missing value for "Fare"
train.drop([152],inplace=True)

# imputing mean for missing values in "Age"
train['Age'] = train['Age'].fillna(value=train['Age'].mean())

#plotting missing values now
sns.heatmap(train.isnull(),yticklabels=False,cbar=False)



### Data Exploration and Visualisation

#Survivals

#plotting Survivals
sns.countplot(x="Survived",data=train)

#plotting Survivals and Gender
sns.countplot(x='Survived',data=train,hue='Sex')

#plotting Survivals and Class
sns.countplot(x='Survived',data=train, hue='Pclass')

#plotting Survivals separated in 2 two grids for different passenger classes
sns.catplot(x='Pclass',data=train,hue='Sex',col='Survived',kind='count')


#age of passengers and its distribution per class
sns.boxplot(x='Pclass',y='Age',data=train)

#number of male and female passengers
sns.countplot(x='Sex',data=train)

#plotting distribution for 'Fare'
sns.distplot(train['Fare'],bins=30,kde=False,color='red')
